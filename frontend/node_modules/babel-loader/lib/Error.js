"use strict";

const STRIP_FILENAME_RE = /^[^:]+: /;
<<<<<<< HEAD
=======

>>>>>>> 491790fa3284842aea531bfa9d2fd819794b4f37
const format = err => {
  if (err instanceof SyntaxError) {
    err.name = "SyntaxError";
    err.message = err.message.replace(STRIP_FILENAME_RE, "");
    err.hideStack = true;
  } else if (err instanceof TypeError) {
    err.name = null;
    err.message = err.message.replace(STRIP_FILENAME_RE, "");
    err.hideStack = true;
  }
<<<<<<< HEAD
  return err;
};
=======

  return err;
};

>>>>>>> 491790fa3284842aea531bfa9d2fd819794b4f37
class LoaderError extends Error {
  constructor(err) {
    super();
    const {
      name,
      message,
      codeFrame,
      hideStack
    } = format(err);
    this.name = "BabelLoaderError";
    this.message = `${name ? `${name}: ` : ""}${message}\n\n${codeFrame}\n`;
    this.hideStack = hideStack;
    Error.captureStackTrace(this, this.constructor);
  }
<<<<<<< HEAD
}
=======

}

>>>>>>> 491790fa3284842aea531bfa9d2fd819794b4f37
module.exports = LoaderError;